{% load static %}
{% load check_include_template %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SZUT Inventur Management</title>
    <link rel="icon" href="{% static 'images/szut-logo.jpg' %}" type="image/jpg" sizes="16x16">
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
</head>
<body>
    <nav>
        <div class="nav-top-bar">
            <div class="logo-name">
                <img src="{% static 'images/szut-logo.jpg' %}" alt="logo">
                <p>SZUT Inventur Management</p>
            </div>
            <div class="search">
                <form action="">
                    <input type="text" name="search" placeholder="Suche nach Räumen, Geräten und Tickets ...">
                </form>
            </div>
            <div class="login">Anmelden<i class="bi bi-chevron-compact-down"></i></div>
        </div>
        <div class="nav-side-bar">
            <ul>
                <li><a href="../overview/" onclick="loadAjaxContent('overview');return false">Übersicht</a></li>
                <li><a href="../rooms/" onclick="loadAjaxContent('rooms');return false">Räume</a></li>
                <li><a href="../devices/" onclick="loadAjaxContent('devices');return false">Geräte</a></li>
                <li><a href="../ticket-management/" onclick="loadAjaxContent('ticket-management');return false">Ticket-System</a></li>
            </ul>
        </div>
    </nav>
    <!-- Reserved section -->
    <main id="page-content">
        {% if current_page_file|template_exists %}{% include current_page_file %}{% else %}{% if 'failedloading.html'|template_exists %}{% include 'failedloading.html' %}{% else %}<p>Ein Fehler ist aufgetreten</p>{% endif %}{% endif %}
    </main>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        loadAjaxContent = function(page) {
            $.ajax({
                url: '../' + page + '/',
                async: true,
                success: function(data) {
                    $('#page-content').html(data);
                    window.history.pushState(null, null, '../' + page + '/');
                },
                error: function() {
                     $('#page-content').getScript('{% if 'failedloading.html'|template_exists %}{% include 'failedloading.html' %}{% else %}<p>Ein Fehler ist aufgetreten</p>{% endif %}');
                     window.history.pushState(null, null, '../' + page + '/');
                },
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
               }
            });
        }
    </script>
</body>
</html>